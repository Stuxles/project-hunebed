# Firestore
In this bit of documentation we will show what principles of firestore we use in our applications.

This documentation is based on the tutorial of [The Net Ninja](https://www.thenetninja.co.uk/courses/firebase-firestore-tutorial). 
He made use of his [firebase repository](https://github.com/iamshaunjp/firebase-firestore-playlist) where you can find all the code he used. And where the code in this documentation is based of.

For more documentation of [firebase](https://firebase.google.com/docs) and [firestore](https://firebase.google.com/docs/firestore/) visit the links.

## Get started
Before we get started with firebase you neet to include the firebase config files. YOu can do this by adding a firebase.js file in the [project-hunebed/assets/js/](https://github.com/Stuxles/project-hunebed/tree/master/assets/js) directory and add the following code from firebase:
```javascript
// Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "<apiKey>",
    authDomain: "<authDomain>",
    databaseURL: "<databaseURL>",
    projectId: "<projectId>",
    storageBucket: "<storageBucket>",
    messagingSenderId: "<messagingSenderId>",
    appId: "<appId>"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
```
REMEMBER, these configuration scripts can be generated by creating a new app in your firebase project. 

## Getting data from the firestore database
### Get document
With the following code you can get documents from a collection in Firestore:
```javascript
db.collection('<collection>').get().then((snapshot) => {
    snapshot.docs.forEach(doc => {
        // Put here what you want to do with doc
    })
})

```
### Get field
To get a specific field from the doc you can do the following:
```javascript
doc.data().<fieldname>
```
### Delete document
To delete data from the database you need to know the id of the doc you want to remove.
After witch you can do the following:
```javascript
db.collection('<collection>').doc(<docID>).delete();
```
### Add document
To add a new document to the databse you can do the following:
```javascript
db.collection('<collection').add({
    <fieldName>: <fieldValue>,
    <fieldName>: <fieldValue>
});
```
### Updating and overwriting a document
To update a field of a specific document you can do the following:
```javascript
db.collection('<collection>').doc('<item_id>').update({
    <fieldName>: '<newValue>'
})
```
To overwrite a complete codument you can do the following:
```javascript
db.collection('<collection>').doc('<item_id>').set({
    <newFieldName>: '<newValue>'
})
```
## Realtime
To do keep the ui up to date realtime with changes to the database you can use the following code:
```javascript
db.collection('<collection>').orderBy('<fieldName>').onSnapshot(snapshot => {
    let changes = snapshot.docChanges();
    changes.forEach(change => {
        if(change.type == 'added'){
          // Do what you need when an doc has been added.
        } else if (change.type == 'removed'){
          // Do what you need when an doc has been removed.
        }
    })
})
```
